<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>🚀 Random Hackers Channel Content</title>
<link href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700&display=swap" rel="stylesheet" />
<style>
:root {
  --bg: #181b27;
  --bg-gradient: linear-gradient(135deg,#3e3663 60%,#241f3d 100%);
  --card-bg: rgba(50, 38, 77, 0.92);
  --border-soft: rgba(255,255,255,0.07);
  --muted: #b1a9d4;
  --accent-primary: #eb2d8a;
  --btn-bg: #352e5c;
  --btn-text: var(--accent-primary);
  --transition: 0.22s cubic-bezier(.3,1.3,.57,1);
}
body { margin:0;padding:30px 0; background: var(--bg-gradient); font-family: 'Almarai', sans-serif; color:#e7daff; display:flex; justify-content:center; user-select:none; min-height:100vh; }
.container { width:95vw; max-width:950px; background: var(--bg); border-radius:20px; box-shadow:0 10px 38px #c536906d; padding:26px 30px; display:flex; flex-direction:column; min-height:80vh; }
header { display:flex; justify-content:space-between; align-items:center; padding-bottom:16px; border-bottom:1px solid var(--border-soft); }
.brand { display:flex; align-items:center; gap:20px; }
.title { font-weight:800; font-size:22px; user-select:none; }
nav { display:flex; gap:14px; align-items:center; user-select:none; }
/* اهتزاز الحقل عند خطأ */
@keyframes shake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-5px); }
  40% { transform: translateX(5px); }
  60% { transform: translateX(-5px); }
  80% { transform: translateX(5px); }
  100% { transform: translateX(0); }
}

.input-error {
  animation: shake 0.3s;
  border: 1px solid #f55370;
}
/* تأثير أزرار متدرج ديناميكي + تحريك عند hover */
.btn {
  background: linear-gradient(135deg, #f23692, #741e7a);
  color:#fff;
  font-weight:700;
  transition: all 0.3s ease;
}

.btn:hover {
  background: linear-gradient(135deg, #eb2f8b, #3b1d70);
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(242,54,147,0.5);
}
.btn { font-size:14px; padding:7px 14px; border-radius:12px; border:none; background:var(--btn-bg); color:var(--btn-text); cursor:pointer; font-weight:600; transition:background var(--transition), color var(--transition); }
.btn:hover, .btn:focus {background:var(--accent-primary); color:#fff;}
.btn.owner {font-weight:700;}
.btn.back { background:#372b56; color:#fff; font-size:15px; padding:7px 14px; }
.tabs { display:flex; gap:8px; margin:24px 0 32px 0; flex-wrap:wrap; user-select:none; }
.tab { padding:8px 16px; border-radius:20px; background:var(--btn-bg); font-size:14px; font-weight:600; color:var(--accent-primary); cursor:pointer; transition: background 0.3s; }
.tab:hover {background:var(--accent-primary); color:#fff;}
.tab.active {background:var(--accent-primary); color:#fff; box-shadow:0 4px 20px #f045aabc;}
main { flex-grow:1; }
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px; margin-top:20px; }
.card { background:var(--card-bg); border-radius:15px; padding:16px; min-height:340px; display:flex; flex-direction:column; position:relative; box-shadow:0 5px 28px rgba(235,45,138,0.25); transition: box-shadow 0.3s; }
.card:hover {box-shadow:0 14px 48px #f236935e, 0 2px 18px #201736aa;}
.thumb { height:170px; border-radius:14px; background-size:cover; background-position:center; margin-bottom:8px; }
.meta { display:flex; justify-content:space-between; font-weight:700; font-size:15px; }
.desc { margin-top:8px; font-size:14px; color:var(--muted); flex-grow:1; white-space: pre-line; }
.file-info { margin:8px 0; font-size:13px; color:var(--muted); }
.actions { display:flex; gap:8px; margin-top:10px; }
.actions .btn { font-size:14px; padding:6px 12px; flex:auto; }
.owner-actions { position:absolute; top:12px; left:12px; display:flex; gap:8px; z-index:10; }
.modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(26, 9, 36, 0.9); z-index:9999; padding:20px; }
.modal.active {display:flex;}
./* تحديث الـ modal ليصبح بطاقة أنيقة */
.modal .panel {
  background: linear-gradient(135deg,#3e3663 60%,#241f3d 100%);
  border-radius: 25px;
  padding: 30px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 12px 42px rgba(242,54,147,0.5);
  position: relative;
  transform: scale(0.8);
  opacity: 0;
  transition: all 0.3s ease;
}

.modal.active .panel {
  transform: scale(1);
  opacity: 1;
}
.close {
  position: absolute;
  top: -12px;       /* رفعها فوق العنوان */
  right: 12px;      /* وضعها على يمين الـ panel */
  font-size: 22px;
  cursor: pointer;
  color: var(--muted);
  z-index: 20;
}
.close:hover {
  color: var(--accent-primary);
}

.modal label {display:block; font-weight:700; margin-top:12px; font-size:14px;}
.modal input, .modal textarea, .modal select {width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #444; background:#222; color:#eee; font-size:14px;}
.modal textarea {min-height:100px;}
.modal .actions { justify-content:flex-end; display:flex; gap:10px; margin-top:18px; }
.side-login { position: fixed; top:20px; left:20px; z-index:11000; }
.tiny-btn { padding: 5px 10px; font-size:12px; border-radius:20px; background:#2c2342; border:1px solid #eb2f8b; color:#eb2f8b; font-weight:700;}
.tiny-btn:hover { background:#351f50; color:#fff; }
.search-bar { margin-top:16px; }
.search-bar input { width:100%; padding:10px; border-radius:12px; border:none; font-size:14px; background:#222; color:#eee; }
footer { margin-top:40px; padding:20px; background:#2b2147; border-radius:20px; display:flex; justify-content: space-between; align-items: center; flex-wrap:wrap; }
.footer-btns { display:flex; gap:12px; }
.footer-btns a { background: linear-gradient(135deg, #f23692, #741e7a); padding:10px 22px; border-radius:28px; font-weight:700; font-size:14px; color:#fff; text-decoration:none; box-shadow:0 4px 16px #f236964d; }
.footer-btns a:hover {background:#eb2f8b;box-shadow:0 4px 20px #f23696cc;}
.delete-modal {
  text-align: center;
  padding: 25px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 4px 30px rgba(0,0,0,0.1);
}

.delete-modal h3 {
  color: #e63946;
  margin-bottom: 12px;
}

.delete-modal p {
  font-size: 14px;
  color: #666;
  margin-bottom: 25px;
}

.delete-modal .actions {
  display: flex;
  justify-content: center;
  gap: 10px;
}

.delete-modal .btn.owner {
  background: linear-gradient(90deg, #ff416c, #ff4b2b);
  color: #fff;
  transition: 0.3s;
}

.delete-modal .btn.owner:hover {
  transform: scale(1.05);
  background: linear-gradient(90deg, #ff4b2b, #ff416c);
}
</style>
</head>
<body>

<div class="side-login">
  <button id="adminBtn" class="tiny-btn" title="Log in as administrator">🧊</button>
</div>

<div class="container">
  <header>
    <div class="brand"><div class="title">Random Hackers Channel Content and Tools Documentation. 🧸</div></div>
    <nav>
      <button id="btnAddFile" class="btn owner" style="display:none;">+ Post File</button>
    </nav>
  </header>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="🔎 Search for files directly" oninput="filterSearch()"/>
  </div>

  <div id="categories" class="tabs" role="tablist"></div>
  <main><div id="grid" class="grid"></div></main>
  <footer>
    <div>Design and programming rights to the Random Hackers channel ㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤ
    </div>
    <div class="footer-btns">
      <a href="https://t.me/Rand2m" target="_blank">👾 Channel</a>
      <a href="https://t.me/BotBo3Bot" target="_blank">👾 Contact Me</a>
    </div>
  </footer>
</div>

<div id،="modal" class="modal">
  <div class="panel">
    <span id="modalClose" class="close">✖</span>
    <div id="modalBody"></div>
  </div>
</div>

<script>
let isOwner=false;
const ownerPassword="@n2511244";
let prevStates=[];
let items=JSON.parse(localStorage.getItem('items')||'[]');
if(!items.length){
  items=[
  {id:1, title:"تطبيق مشاهدتي", description:"تطبيق لمراقبة المشاهدات", category:"التطبيقات", image:"https://picsum.photos/id/45/400/300", link:"https://t.me/your_channel/22", size:"14MB", published:true},
  {id:2, title:"كود بوت فاخر", description:"كود بوت تلغرام بخدمات جديدة", category:"الأكواد", image:"https://picsum.photos/id/38/400/300", link:"https://t.me/your_channel/11", size:"8KB", published:true},
  {id:3, title:"دورة PDF", description:"ملف pdf يشمل دروس تعلم البرمجة", category:"الملفات", image:"https://picsum.photos/id/88/400/300", link:"https://t.me/your_channel/31", size:"3MB", published:true},
  {id:4, title:"سورس بوت تواصل", description:"سورس بلغة بايثون مطور خصيصاً للبوتات", category:"السورسات", image:"https://picsum.photos/id/12/400/300", link:"https://t.me/your_channel/44", size:"440KB", published:true},
  {id:5, title:"أدوات مساعدة", description:"مجموعة أدوات متنوعة", category:"الأدوات", image:"https://picsum.photos/id/65/400/300", link:"#", size:"2MB", published:true},
  {id:6, title:"بوت تليجرام", description:"بوتات جاهزة للاستخدام", category:"البوتات", image:"https://picsum.photos/id/66/400/300", link:"#", size:"500KB", published:true}
];
localStorage.setItem('items', JSON.stringify(items));
}
function saveItems(){ localStorage.setItem('items', JSON.stringify(items)); }


function buildCategories(){
  const cats=["Apks","Codes","Files","Sources","Tools","Bots","Random"];
  document.getElementById('categories').innerHTML = cats.map(c=>`<div class="tab${c==='Random'?' random':''}" onclick="showCategory('${c}')">${c}</div>`).join('');
}

function showCategory(cat){
  prevStates.push({mode:"grid",cat});
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  [...document.querySelectorAll('.tab')].find(t=>t.textContent===cat)?.classList.add('active');

  let list = items.filter(i => i.category === cat && i.published);
 // الآن كل الأقسام تتصرف بنفس الطريقة

  const grid=document.getElementById('grid');
  if(list.length===0){
    grid.innerHTML='<div style="text-align:center;padding:30px;color:var(--muted);font-size:16px;">There are no files in this section ❎</div>';
  } else {
    grid.innerHTML = list.map(it=>`
      <div class="card">
        <div class="thumb" style="background-image:url('${it.image||'https://via.placeholder.com/400x300?text=No image'}')"></div>
        ${isOwner?`<div class="owner-actions">
          <button class="btn owner btn-small" onclick="openAddEditModal(${it.id})">Edit</button>
          <button class="btn danger btn-small" onclick="deleteFile(${it.id})">Delete</button>
        </div>`:''}
        <div class="meta"><div>${it.title}</div><div>${it.category}</div></div>
        <div class="desc">${it.description}</div>
        <div class="file-info">Size: ${it.size||'undefined'}</div>
        <div class="actions">
          <a class="btn" href="${it.link}" target="_blank">View / Download</a>
          <button class="btn" onclick="openDetailsModal(${it.id})">Details</button>
        </div>
      </div>`).join('');
  }

  document.getElementById('btnAddFile').style.display=(isOwner)?'inline-block':'none';
  document.getElementById('searchInput').value="";
}

function filterSearch(){
  const q=document.getElementById('searchInput').value.toLowerCase();
  prevStates.push({mode:"search",query:q});
  const list=items.filter(i => (i.title.toLowerCase().includes(q) || i.description.toLowerCase().includes(q)) && i.published);
  const grid=document.getElementById('grid');
  if(list.length===0) grid.innerHTML='<div style="text-align:center;padding:30px;color:var(--muted);font-size:16px;">✖️No results found..</div>';
  else{
    grid.innerHTML = list.map(it=>`
      <div class="card">
        <div class="thumb" style="background-image:url('${it.image||'https://via.placeholder.com/400x300?text=No image'}')"></div>
        ${isOwner?`<div class="owner-actions">
          <button class="btn owner btn-small" onclick="openAddEditModal(${it.id})">Edit</button>
          <button class="btn danger btn-small" onclick="deleteFile(${it.id})">Delete</button>
        </div>`:''}
        <div class="meta"><div>${it.title}</div><div>${it.category}</div></div>
        <div class="desc">${it.description}</div>
        <div class="file-info">Size: ${it.size||'undefined'}</div>
        <div class="actions">
          <a class="btn" href="${it.link}" target="_blank">View / Download</a>
          <button class="btn" onclick="openDetailsModal(${it.id})">Details</button>
        </div>
      </div>`).join('');
  }
}

function showModal(html){
  document.getElementById('modalBody').innerHTML=html;
  document.getElementById('modal').classList.add('active');
}

function closeModal(){ document.getElementById('modal').classList.remove('active'); document.getElementById('modalBody').innerHTML=''; }

document.getElementById('modalClose').onclick=()=>{ closeModal(); if(prevStates.length){ handleBack(); } };

function openDetailsModal(id){
  const item = items.find(i => i.id === id);
  if (!item) return;

  // حفظ الحالة السابقة لتفعيل زر العودة
  prevStates.push({ mode: "details", id });

  showModal(`
    <h3>${item.title}</h3>
    <img src="${item.image}" style="width:100%;max-height:160px;border-radius:10px;margin:16px 0;">
    <div><b>Description:</b> ${item.description}</div>
    <div><b>Size:</b> ${item.size}</div>
    <div><b>Department:</b> ${item.category}</div>
    <div><b>Link:</b> <a href="${item.link}" target="_blank">${item.link}</a></div>
    <div class="actions">
      <a class="btn" href="${item.link}" target="_blank">View / Download</a>
      <button class="btn back" onclick="closeModal(); handleBack();">⬅ Back</button>
    </div>
  `);

  // 👇 تعديل يضمن أن زر ✖️ سيعيد المستخدم بشكل صحيح
  document.getElementById('modalClose').onclick = () => {
    closeModal();
    handleBack();
  };
}

function openDetailsModal(id){
  const item = items.find(i => i.id === id);
  if (!item) return;

  // نحفظ فقط الحالة مرة واحدة
  if (!prevStates.some(s => s.mode === "details" && s.id === id)) {
    prevStates.push({ mode: "details", id });
  }

  showModal(`
    <h3>${item.title}</h3>
    <img src="${item.image}" style="width:100%;max-height:160px;border-radius:10px;margin:16px 0;">
    <div><b>Description:</b> ${item.description}</div>
    <div><b>Size:</b> ${item.size}</div>
    <div><b>Department:</b> ${item.category}</div>
    <div><b>Link:</b> <a href="${item.link}" target="_blank">${item.link}</a></div>
    <div class="actions">
      <a class="btn" href="${item.link}" target="_blank">View / Download</a>
      <button class="btn back" onclick="closeModal(); showCategory('${item.category}')">⬅ Back</button>
    </div>
  `);

  // زر ✖️ فقط يغلق النافذة بدون نداء handleBack
  document.getElementById('modalClose').onclick = closeModal;
}

function submitAddEdit(id){
  const form = document.getElementById("formAddEdit");
  const data = {
    title: form.title.value,
    category: form.category.value,
    description: form.description.value,
    link: form.link.value,
    image: form.image.value,
    size: form.size.value
  };
  if(id){
    const idx = items.findIndex(i => i.id === id);
    items[idx] = { ...items[idx], ...data };
  }
  else{
    items.push({ id: Date.now(), ...data, published: true }); // تم إضافة published:true هنا
  }
  saveItems(); buildCategories(); showCategory(data.category); closeModal();
  return false;
}

function deleteFile(id) {
  const item = items.find(i => i.id === id);
  if (!item) return;

  prevStates.push({ mode: "deleteConfirm", id });

  showModal(`
    <div class="delete-modal">
      <h3>⚠️ R U sure U want to delete this file?</h3>
      <p>"${item.title}" It will be permanently deleted from your library.</p>
      <div class="actions">
        <button class="btn back" onclick="closeModal(); handleBack();">Cancel</button>
        <button class="btn owner" onclick="confirmDelete(${id})">Yes</button>
      </div>
    </div>
  `);

  // حركة الظهور
  const modal = document.querySelector(".panel");
  modal.style.transform = "scale(0.8)";
  modal.style.opacity = "0";
  setTimeout(() => {
    modal.style.transition = "all 0.25s ease";
    modal.style.transform = "scale(1)";
    modal.style.opacity = "1";
  }, 30);
}

function confirmDelete(id) {
  const modal = document.querySelector(".panel");
  // حركة الإغلاق
  modal.style.transition = "all 0.2s ease";
  modal.style.transform = "scale(0.8)";
  modal.style.opacity = "0";

  setTimeout(() => {
    items = items.filter(i => i.id !== id);
    saveItems();
    closeModal();
    buildCategories();
    showCategory("Apks");
  }, 200);
}

function openAddEditModal(id){
  const item = items.find(i => i.id === id) || {title:'',category:'Apks',description:'',link:'',image:'',size:''};
  prevStates.push({mode:"addEdit", id});

  showModal(`
    <h3>${id ? "Edit" : "Post a new file"}</h3>
    <form id="formAddEdit" onsubmit="return submitAddEdit(${id || 0})">
      <label>📄 Address</label>
      <input type="text" name="title" value="${item.title}" required>

      <label>📦 Department</label>
      <select name="category">
        <option ${item.category==='Apks'?'selected':''}>Apks</option>
        <option ${item.category==='Codes'?'selected':''}>Codes</option>
        <option ${item.category==='Files'?'selected':''}>Files</option>
        <option ${item.category==='Sources'?'selected':''}>Sources</option>
        <option ${item.category==='Tools'?'selected':''}>Tools</option>
        <option ${item.category==='Bots'?'selected':''}>Bots</option>
        <option ${item.category==='Random'?'selected':''}>Random</option>
      </select>

      <label>📜 Description</label>
      <textarea name="description" required>${item.description}</textarea>

      <label>🔗 Link</label>
      <input type="url" name="link" value="${item.link}" required>

      <label>🖼 Image link</label>
      <input type="url" name="image" value="${item.image}" placeholder="https://...">

      <label>💾 Size</label>
      <input type="text" name="size" value="${item.size}" placeholder="Example: 14MB">

      <div class="actions">
        <button class="btn owner" type="submit">${id ? "💾 Save changes" : "🚀 Publish"}</button>
        <button type="button" class="btn back" onclick="closeModal(); handleBack();">⬅ Back</button>
      </div>
    </form>
  `);
}

document.getElementById('btnAddFile').onclick=()=>openAddEditModal();

document.getElementById('adminBtn').onclick = function() {
  prevStates.push({mode:"admin"});
  showModal(`
    <h3>Administrator/Guest Login</h3>
    <form onsubmit="return loginOwner();">
      <label>Administrator password</label>
      <input id="ownerPassword" type="password" />
      <div class="actions">
        <button class="btn owner" type="submit">Admin Login</button>
        <button type="button" class="btn" onclick="loginVisitor()">Guest login</button>
      </div>
      <div id="loginError" style="color:#f55370;font-size:14px;margin-top:12px;position:relative;top:4px;"></div>
    </form>
  `);
};

function loginOwner() {
  const pass = document.getElementById('ownerPassword').value;
  const field = document.getElementById('ownerPassword');
  const errorDiv = document.getElementById('loginError');
  
  if(pass === ownerPassword){
    isOwner = true;
    closeModal();
    buildCategories();
    showCategory('Apks');
  } else {
    field.classList.add('input-error');
    setTimeout(() => field.classList.remove('input-error'), 300);
    errorDiv.innerText = "Incorrect password"; 
  }
  return false;
}

function showNotification(category){
  const percent = getFilesPercentage(category);
  const count = items.filter(i => i.category === category).length;

  showModal(`
    <div style="text-align:center; padding:20px;">
      <h3>${category} Section</h3>
      <p>📂 Total files: ${count} (${percent}%)</p>
      <button class="btn back" onclick="closeModal(); showCategory('${category}')">Start Browsing</button>
    </div>
  `);
}

function getFilesPercentage(category){
  const total = items.filter(i => i.published).length; 
  if(total === 0) return 0;
  const count = items.filter(i => i.category === category && i.published).length; 
  return Math.round((count / total) * 100); 
}

function loginVisitor(){
  isOwner = false;
  const totalFiles = items.filter(i => i.published).length;
  showModal(`
    <div style="text-align:center; padding:30px; background: var(--card-bg); border-radius:20px; box-shadow:0 8px 30px #f236938b;">
      <h2 style="color: #fff; margin-bottom:16px;">👤 Guest</h2>
      <p style="color:#b1a9d4; font-size:15px;">You are logged in as a guest!</p>
      <p style="color:#fff; font-size:14px;">📂 Total files: ${totalFiles}</p>
      <button class="btn" onclick="closeModal(); buildCategories(); showCategory('Apks');">Continue</button>
    </div>
  `);
}

function handleBack(){
  if(prevStates.length===0){ return; }
  const prev=prevStates.pop();
  switch(prev.mode){
    case "grid": showCategory(prev.cat); break;
    case "details": openDetailsModal(prev.id); break;
    case "addEdit": closeModal(); break;
    case "search": document.getElementById('searchInput').value=""; filterSearch(); break;
    case "admin": closeModal(); break;
    default: showCategory('Apks');
  }
}

buildCategories();
showCategory('Apks');
</script>
</body>
</html>
